<div id="highlights" class="carousel slide d-block mx-auto" data-ride="carousel">
  <ol class="carousel-indicators"></ol>

  <div class="carousel-inner">
    {raw}highlights_carousel_output{raw}
  </div>

  <a class="carousel-control-prev" href="#highlights" role="button" data-slide="prev">
    {fa}chevron-circle-left{fa}
  </a>
  <a class="carousel-control-next" href="#highlights" role="button" data-slide="next">
    {fa}chevron-circle-right{fa}
  </a>
</div>

<script>
$(function() {
  $('#highlights').carousel({ interval: 8000 }).on('slide.bs.carousel', function (e) {
    let lazy = $(e.relatedTarget).find('img[data-src]');

    if (lazy.length === 1) {
      lazy.attr('src', lazy.data('src'));
      lazy.removeAttr('data-src');
    }
  });

  let highlightsIndicators = '';

  for (var i = 0, n = $('#highlights .carousel-inner div.carousel-item').length; i < n; i++) {
    highlightsIndicators += '<li data-target="#highlights" data-slide-to="' + i + '"' + (i == 0 ? ' class="active"' : '') + '></li>';
  }

  $('#highlights ol.carousel-indicators').html(highlightsIndicators);
});
</script>
