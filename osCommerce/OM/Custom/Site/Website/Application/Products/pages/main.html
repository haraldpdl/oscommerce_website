<div id="highlights">
  <img src="{publiclink}{raw}highlights_image{raw}{publiclink}">
</div>

<div class="row">
  <div id="maincontainer" class="col-lg-9">
    <div id="maincontent">
      <h1 class="display-4">{lang}oscom_page_title{lang}</h1>

      {lang}oscom2_main_content{lang}

      <div class="row pt-2">
        <div class="col-sm-6">
          <div class="alert alert-primary pt-4 mb-2">
            <h3 style="line-height: 35px;"><img src="{publiclink}images/download_1and1.png{publiclink}" style="float: left; max-height: 35px; margin-right: 10px;"> {lang}partner_download_title{lang}</h3>

            {lang}partner_download_description{lang}

            <p><a href="{lang}partner_download_button_url{lang}" target="_blank" class="btn btn-light btn-block">{lang}partner_download_button_start{lang}</a></p>
          </div>

          <p class="small text-center"><a href="{link}Services|Website|hosting{link}">{lang}partner_download_other_partners{lang}</a></p>
        </div>

        <div class="col-sm-6">
          <div class="row pt-4">
            <div class="col">
              <h3 style="line-height: 35px;">{lang}main_download_title{lang}</h3>

              {lang}main_download_description{lang}

              <a href="{link}Products|Website|Download={raw}releases_oscom2_latest code{raw}{link}" class="btn btn-success btn-block">
                {lang}button_download{lang}<br><small>{value}releases_oscom2_latest version{value}</small>
              </a>

              <h4 class="text-muted pt-4">{lang}oscom2_requirements_title{lang}</h4>

              {lang}oscom2_requirements{lang}
            </div>
          </div>
        </div>
      </div>

      {ifvalue releases_ce}
      <h2 class="pt-4 pb-2">{lang}oscom_ce_title{lang}</h2>

      {lang}oscom_ce_main_content{lang}

      <div id="ceReleases" class="alert alert-warning">

        {loop releases_ce}
        <div class="py-2">
          <a href="#user_profile_url#" class="d-none" data-group="ce"><img src="#user_photo_url#" alt="Maintained by #user_name#" title="Maintained by #user_name#" class="img-fluid rounded-circle float-right" style="max-width: 48px;"></a>

          <h3>#title# <small>#version#</small></h3>

          <p>#description#</p>

          <div class="d-flex flex-column flex-md-row">
            <a data-newsid="#news_id#" class="btn btn-link d-none">{lang}link_announcement{lang}</a>
            <a href="#support_url#" class="btn btn-link">{lang}link_support{lang}</a>
            <a href="https://github.com/#github#" target="_blank" class="btn btn-link">{lang}link_github{lang}</a>
            <a href="{link}Products|Website|Download=%code%{link}" class="btn btn-warning ml-auto">{lang}button_download{lang}</a>
          </div>
        </div>
        {loop}

      </div>
      {ifvalue}

      <h2 class="pb-2">{lang}z4_title{lang}</h2>

      <div class="alert alert-danger">
        {lang}z4_main_content{lang}

        <div class="row">
          <div class="col">
            <form action="{link}Products|Website|Download{link}" method="post">
              <div class="input-group">
                <select name="get" class="form-control">
                  <optgroup label="-- osCommerce Online Merchant --">

{loop releases_archive_oscom}
                    <option value="#code#">#version#</option>
{loop}

                  </optgroup>

                  <optgroup label="-- The Exchange Project --">

{loop releases_archive_tep}
                    <option value="#code#">#version#</option>
{loop}

                  </optgroup>
                </select>

                <div class="input-group-append">
                  <button type="submit" class="btn btn-danger">{lang}button_download{lang}</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  {widget}products_sidebar_nav{widget}
</div>

<script>
$('#ceReleases .d-flex a[data-newsid]').each(function() {
  let newsId = $(this).data('newsid');

  if (newsId != '') {
    $(this).attr('href', '{link}Us||News=NEWS_ID{link}'.replace('NEWS_ID', newsId));
    $(this).removeClass('d-none');
  }
});

$('#ceReleases .d-flex a:not(.d-none):first').addClass('pl-0');

$('#ceReleases a[data-group="ce"]').each(function() {
  if ($(this).attr('href') != '') {
    $(this).removeClass('d-none');
  }
});
</script>
